(function(){function c(b,a,k){var d=c.resolve(b);if(null==d)throw k=k||b,a=a||"root",d=Error('Failed to require "'+k+'" from "'+a+'"'),d.path=k,d.parent=a,d.require=!0,d;a=c.modules[d];a._resolving||a.exports||(k={exports:{}},k.client=k.component=!0,a._resolving=!0,a.call(this,k.exports,c.relative(d),k),delete a._resolving,a.exports=k.exports);return a.exports}c.modules={};c.aliases={};c.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var a=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],
k=0;k<a.length;k++){b=a[k];if(c.modules.hasOwnProperty(b))return b;if(c.aliases.hasOwnProperty(b))return c.aliases[b]}};c.normalize=function(b,a){var c=[];if("."!=a.charAt(0))return a;b=b.split("/");a=a.split("/");for(var d=0;d<a.length;++d)".."==a[d]?b.pop():"."!=a[d]&&""!=a[d]&&c.push(a[d]);return b.concat(c).join("/")};c.register=function(b,a){c.modules[b]=a};c.alias=function(b,a){if(!c.modules.hasOwnProperty(b))throw Error('Failed to alias "'+b+'", it does not exist');c.aliases[a]=b};c.relative=
function(b){function a(d){var f=a.resolve(d);return c(f,b,d)}var k=c.normalize(b,"..");a.resolve=function(a){var f=a.charAt(0);if("/"==f)return a.slice(1);if("."==f)return c.normalize(k,a);var f=b.split("/"),g;a:{for(g=f.length;g--;)if("deps"===f[g])break a;g=-1}(g+=1)||(g=0);return a=f.slice(0,g+1).join("/")+"/deps/"+a};a.exists=function(b){return c.modules.hasOwnProperty(a.resolve(b))};return a};c.register("component-indexof/index.js",function(b,a,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}});c.register("component-emitter/index.js",function(b,a,c){function d(a){if(a){for(var e in d.prototype)a[e]=d.prototype[e];return a}}var f=a("indexof");c.exports=d;d.prototype.on=function(a,e){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(e);return this};d.prototype.once=function(a,e){function b(){h.off(a,b);e.apply(this,arguments)}var h=this;this._callbacks=this._callbacks||{};e._off=b;this.on(a,b);return this};
d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=function(a,e){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var b=this._callbacks[a];if(!b)return this;if(1==arguments.length)return delete this._callbacks[a],this;var h=f(b,e._off||e);~h&&b.splice(h,1);return this};d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),b=this._callbacks[a];if(b)for(var b=b.slice(0),h=0,l=b.length;h<l;++h)b[h].apply(this,
e);return this};d.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};d.prototype.hasListeners=function(a){return!!this.listeners(a).length}});c.register("ForbesLindesay-is-browser/client.js",function(b,a,c){c.exports=!0});c.register("component-to-function/index.js",function(b,a,c){function d(a){switch({}.toString.call(a)){case "[object Object]":return e(a);case "[object Function]":return a;case "[object String]":return a=/^ *\W+/.test(a)?new Function("_",
"return _ "+a):new Function("_","return _."+a),a;case "[object RegExp]":return g(a);default:return f(a)}}function f(a){return function(b){return a===b}}function g(a){return function(b){return a.test(b)}}function e(a){var b={},l;for(l in a)b[l]="string"===typeof a[l]?f(a[l]):d(a[l]);return function(a){if("object"!==typeof a)return!1;for(var l in b)if(!(l in a&&b[l](a[l])))return!1;return!0}}c.exports=d});c.register("component-type/index.js",function(b,a,c){var d=Object.prototype.toString;c.exports=
function(a){switch(d.call(a)){case "[object Function]":return"function";case "[object Date]":return"date";case "[object RegExp]":return"regexp";case "[object Arguments]":return"arguments";case "[object Array]":return"array";case "[object String]":return"string"}return null===a?"null":void 0===a?"undefined":a&&1===a.nodeType?"element":a===Object(a)?"object":typeof a}});c.register("component-each/index.js",function(b,a,c){function d(a,b){for(var e=0;e<a.length;++e)b(a[e],e)}var f=a("to-function"),g;
try{g=a("type-component")}catch(e){g=a("type")}var m=Object.prototype.hasOwnProperty;c.exports=function(a,b){b=f(b);switch(g(a)){case "array":return d(a,b);case "object":if("number"==typeof a.length)return d(a,b);var e=b,c;for(c in a)m.call(a,c)&&e(c,a[c]);break;case "string":for(e=b,c=0;c<a.length;++c)e(a.charAt(c),c)}}});c.register("ianstormtaylor-map/index.js",function(b,a,c){try{var d=a("each")}catch(f){d=a("each-component")}c.exports=function(a,b){var c=[];d(a,function(a){c.push(b.apply(null,
arguments))});return c}});c.register("jonathanong-array-series/index.js",function(b,a,c){function d(){}c.exports=function(a,b,c){function m(a){a?c(a):h()}c||("function"===typeof b?(c=b,b=null):c=d);if(!a||!a.length)return c();a=a.slice(0);var h=b?function(){a.length?a.shift().call(b,m):c()}:function(){a.length?a.shift()(m):c()};h()}});c.register("ramitos-map-series/src/map-series.js",function(b,a,c){var d=a("array-series"),f=a("map");c.exports=function(a,b,c){var h=[];a=f(a,function(a){return function(c){b(a,
function(a,b){h.push(b);c(a)})}});d(a,function(a){c(a,h)})}});c.register("modella/index.js",function(b,a,c){b=c.exports=a("./lib/model");b.utils={};b.utils.clone=a("./lib/utils/clone");b.utils.type=a("./lib/utils/type")});c.register("modella/lib/model.js",function(b,a,c){var d=a("./proto"),f=a("./static"),g=a("./utils/clone");try{var e=a("emitter")}catch(m){e=a("emitter-component")}c.exports=function(a){function b(a){if(!(this instanceof b))return new b(a);if(Array.isArray(a)){for(var c=[],e=0;e<
a.length;++e)c.push(new b(a[e]));return c}a=a?g(a):{};this.attrs={};this._callbacks={};this.dirty={};this.errors=[];b.emit("initializing",this,a);for(c in b._defaults)b.attrs[c]&&(this.attrs[c]=g(b._defaults[c]));for(c in a)b.attrs[c]&&(this.attrs[c]=a[c]);b.emit("initialize",this)}if("string"!==typeof a)throw new TypeError("model name required");e(b);b.modelName=a;b.base="/"+a.toLowerCase();b.attrs={};b.validators=[];b._defaults={};for(var c in f)b[c]=f[c];b.prototype={};b.prototype.model=b;for(c in d)b.prototype[c]=
d[c];return b}});c.register("modella/lib/proto.js",function(b,a,c){var d=a("./utils/clone"),f=a("map-series"),g=function(){};try{var e=a("emitter")}catch(m){e=a("emitter-component")}e(b);b.error=function(a,b){this.errors.push({attr:a,message:b});return this};b.isNew=function(){return!this.has(this.model.primaryKey)};b.primary=function(a){var b=this.model.primaryKey;return 0==arguments.length?this[b]():this[b](a)};b.isValid=function(){this.validate();return 0==this.errors.length};b.changed=function(a){if(1==
arguments.length)return!!this.dirty[a];var b={};for(a in this.dirty)b[a]=this.dirty[a];return b};b.validate=function(){var a=this.model.validators||[];this.errors=[];for(var b=0,c=a.length;b<c;b++)a[b](this);this.errors.length?(this.model.emit("invalid",this,this.errors),this.emit("invalid",this.errors)):(this.model.emit("valid",this,null),this.emit("valid",null))};b.remove=function(){function a(b,d){if(b)return e.emit("error",b),c(b);e.removed=!0;e.model.emit("remove",e);e.emit("remove");c(null,
e)}var b=[].slice.call(arguments),c=b.pop()||g,e=this,d=this.model.remove;!this.model.remove&&this.model._sync&&(d=this.model._sync.remove);if(this.isNew())return c(Error("not saved"));this.run("removing",function(){d.apply(e,b.concat(a))})};b.save=function(){function a(b,e){if(b)return d.emit("error",b),c(b);if(e){d.primary(e.id||e._id);for(var h in d.model.attrs)d.attrs[h]=e[h]}d.dirty={};f&&(d.model.emit("create",d),d.emit("create"));d.model.emit("save",d);d.emit("save");c(null,d)}var b=[].slice.call(arguments),
c=b.pop()||g,e="save",d=this,f=this.isNew();if(!f){var m=this.changed(),e="update";if(!m)return c(null,this)}var k=this.model[e];!this.model[e]&&this.model._sync&&(k=this.model._sync[e]);if(!this.isValid())return this.primary(null),c(Error("validation failed"));this.run("saving",function(e){if(e)return c(e);k.apply(d,b.concat(a))})};b.set=function(a){this.model.emit("setting",this,a);this.emit("setting",a);for(var b in a)if(this[b])this[b](a[b]);return this};b.get=function(a){return this.attrs[a]};
b.has=function(a){return void 0!==this.attrs[a]};b.toJSON=function(){return d(this.attrs)};b.run=function(a,b){var c=this.model.listeners(a).concat(this.listeners(a)),e=this;e.errors=[];f(c,function(b,c){b(e,function(){if("saving"===a&&(e.errors.length||!e.isValid()))return c(Error("validation failed"));c()})},b)}});c.register("modella/lib/static.js",function(b,a,c){var d=a("./utils/clone"),f=a("./utils/type"),g=a("is-browser");b.validate=function(a){this.validators.push(a);return this};b.use=function(a,
b){b||(b=a,a=void 0);if(a){var c=/browser|client/,d=/server|node|node.js/;g&&c.test(a)?b(this):!g&&d.test(a)&&b(this)}else b(this);return this};b.attr=function(a,b){if(this.attrs[a])for(var c in b)this.attrs[a][c]=b[c];else{this.attrs[a]=b||{};if("_id"===a||"id"===a)this.attrs[a].primaryKey=!0,this.primaryKey=a;this.prototype[a]=function(b){if(0===arguments.length)return d(this.attrs[a]);var c=this.attrs[a];b=d(b);var h=!1,h=f(b);if(h="object"==h||"array"==h?!0:this.attrs[a]!=b)this.dirty[a]=b,this.attrs[a]=
b,this.model.emit("change",this,a,b,c),this.model.emit("change "+a,this,b,c),this.emit("change",a,b,c),this.emit("change "+a,b,c);return this}}b&&void 0!==b.defaultValue&&(this._defaults[a]=b.defaultValue);this.emit("attr",a,b);return this}});c.register("modella/lib/utils/clone.js",function(b,a,c){function d(a){switch(f(a)){case "object":if(a.toHexString)return a;var b={},c;for(c in a)b[c]=d(a[c]);return b;case "array":b=Array(a.length);c=0;for(var g=a.length;c<g;c++)b[c]=d(a[c]);return b;case "regexp":return b=
""+(a.multiline?"m":""),b+=a.global?"g":"",b+=a.ignoreCase?"i":"",RegExp(a.source,b);case "date":return new Date(a.getTime());default:return a}}function f(a){switch(g.call(a)){case "[object Function]":return"function";case "[object Date]":return"date";case "[object RegExp]":return"regexp";case "[object Arguments]":return"arguments";case "[object Array]":return"array";case "[object String]":return"string"}return null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}var g=Object.prototype.toString;
c.exports=d});c.register("modella/lib/utils/type.js",function(b,a,c){var d=Object.prototype.toString;c.exports=function(a){switch(d.call(a)){case "[object Function]":return"function";case "[object Date]":return"date";case "[object RegExp]":return"regexp";case "[object Arguments]":return"arguments";case "[object Array]":return"array"}return null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}});c.alias("component-emitter/index.js","modella/deps/emitter/index.js");c.alias("component-emitter/index.js",
"emitter/index.js");c.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js");c.alias("ForbesLindesay-is-browser/client.js","modella/deps/is-browser/client.js");c.alias("ForbesLindesay-is-browser/client.js","modella/deps/is-browser/index.js");c.alias("ForbesLindesay-is-browser/client.js","is-browser/index.js");c.alias("ForbesLindesay-is-browser/client.js","ForbesLindesay-is-browser/index.js");c.alias("ramitos-map-series/src/map-series.js","modella/deps/map-series/src/map-series.js");
c.alias("ramitos-map-series/src/map-series.js","modella/deps/map-series/index.js");c.alias("ramitos-map-series/src/map-series.js","map-series/index.js");c.alias("ianstormtaylor-map/index.js","ramitos-map-series/deps/map/index.js");c.alias("component-each/index.js","ianstormtaylor-map/deps/each/index.js");c.alias("component-to-function/index.js","component-each/deps/to-function/index.js");c.alias("component-type/index.js","component-each/deps/type/index.js");c.alias("jonathanong-array-series/index.js",
"ramitos-map-series/deps/array-series/index.js");c.alias("jonathanong-array-series/index.js","ramitos-map-series/deps/array-series/index.js");c.alias("jonathanong-array-series/index.js","jonathanong-array-series/index.js");c.alias("ramitos-map-series/src/map-series.js","ramitos-map-series/index.js");"object"==typeof exports?module.exports=c("modella"):"function"==typeof define&&define.amd?define(function(){return c("modella")}):this.modella=c("modella")})();
